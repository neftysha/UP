<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ================= THEME COLORS ================= -->
    <!-- Light -->
    <Color x:Key="Light.Background">#FFFFFFFF</Color>
    <Color x:Key="Light.Foreground">#FF0F1115</Color>
    <Color x:Key="Light.Surface">#FFF6F7F9</Color>
    <Color x:Key="Light.Accent">#FF0078D7</Color>
    <Color x:Key="Light.AccentDark">#FF005A9E</Color>
    <Color x:Key="Light.Border">#FFCBD5E1</Color>

    <!-- Dark (осветлил на ~10–15%) -->
    <!-- Было: #1E1E1E / #2A2A2A / #3A3A3A — стало чуть светлее и теплее: -->
    <Color x:Key="Dark.Background">#FF24262B</Color>
    <!-- фон окна -->
    <Color x:Key="Dark.Foreground">#FFF3F4F6</Color>
    <!-- основной текст -->
    <Color x:Key="Dark.Surface">#FF2F3338</Color>
    <!-- карточки/поля -->
    <Color x:Key="Dark.Accent">#FF2D89EF</Color>
    <Color x:Key="Dark.AccentDark">#FF1A5FB4</Color>
    <Color x:Key="Dark.Border">#FF3F454D</Color>
    <!-- границы чуть светлее -->

    <!-- Источники кистей -->
    <SolidColorBrush x:Key="LightBackgroundBrush" Color="{StaticResource Light.Background}" />
    <SolidColorBrush x:Key="LightForegroundBrush" Color="{StaticResource Light.Foreground}" />
    <SolidColorBrush x:Key="LightSurfaceBrush"    Color="{StaticResource Light.Surface}" />
    <SolidColorBrush x:Key="LightAccentBrush"     Color="{StaticResource Light.Accent}" />
    <SolidColorBrush x:Key="LightAccentDarkBrush" Color="{StaticResource Light.AccentDark}" />
    <SolidColorBrush x:Key="LightBorderBrush"     Color="{StaticResource Light.Border}" />

    <SolidColorBrush x:Key="DarkBackgroundBrush" Color="{StaticResource Dark.Background}" />
    <SolidColorBrush x:Key="DarkForegroundBrush" Color="{StaticResource Dark.Foreground}" />
    <SolidColorBrush x:Key="DarkSurfaceBrush"    Color="{StaticResource Dark.Surface}" />
    <SolidColorBrush x:Key="DarkAccentBrush"     Color="{StaticResource Dark.Accent}" />
    <SolidColorBrush x:Key="DarkAccentDarkBrush" Color="{StaticResource Dark.AccentDark}" />
    <SolidColorBrush x:Key="DarkBorderBrush"     Color="{StaticResource Dark.Border}" />

    <!-- ================= ACTIVE THEME POINTERS (меняются в коде) ================= -->
    <SolidColorBrush x:Key="AppBackground"  Color="{Binding Color, Source={StaticResource LightBackgroundBrush}}" />
    <SolidColorBrush x:Key="AppForeground"  Color="{Binding Color, Source={StaticResource LightForegroundBrush}}" />
    <SolidColorBrush x:Key="AppSurface"     Color="{Binding Color, Source={StaticResource LightSurfaceBrush}}" />
    <SolidColorBrush x:Key="AppAccent"      Color="{Binding Color, Source={StaticResource LightAccentBrush}}" />
    <SolidColorBrush x:Key="AppAccentDark"  Color="{Binding Color, Source={StaticResource LightAccentDarkBrush}}" />
    <SolidColorBrush x:Key="AppBorder"      Color="{Binding Color, Source={StaticResource LightBorderBrush}}" />

    <!-- ================= METRICS ================= -->
    <CornerRadius x:Key="ControlCornerRadius">8</CornerRadius>
    <Thickness x:Key="ControlPadding">10,6,10,6</Thickness>
    <Thickness x:Key="ControlBorderThickness">1</Thickness>
    <Thickness x:Key="DensePadding">6,3,6,3</Thickness>

    <!-- ================= TEXT ================= -->
    <Style x:Key="HeaderText" TargetType="TextBlock">
        <Setter Property="FontSize" Value="20"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
    </Style>

    <Style x:Key="SubHeaderText" TargetType="TextBlock">
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
    </Style>

    <Style x:Key="CaptionText" TargetType="TextBlock">
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="Opacity" Value="0.8"/>
    </Style>

    <Style x:Key="BodyText" TargetType="TextBlock">
        <Setter Property="FontSize" Value="13"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
    </Style>

    <!-- ================= WINDOW ================= -->
    <Style x:Key="AppWindow" TargetType="Window">
        <Setter Property="Background" Value="{DynamicResource AppBackground}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
        <Setter Property="TextOptions.TextRenderingMode" Value="Auto"/>
    </Style>
    <Style TargetType="Window" BasedOn="{StaticResource AppWindow}"/>

    <!-- ================= BASE BUTTON TEMPLATE ================= -->
    <ControlTemplate x:Key="BaseButtonTemplate" TargetType="{x:Type Button}">
        <Border x:Name="Bd"
                Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                CornerRadius="{StaticResource ControlCornerRadius}"
                SnapsToDevicePixels="True">
            <ContentPresenter HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Margin="{TemplateBinding Padding}"/>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource AppAccent}"/>
                <Setter TargetName="Bd" Property="BorderThickness" Value="2"/>
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Bd" Property="Opacity" Value="0.96"/>
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="Bd" Property="RenderTransform">
                    <Setter.Value>
                        <ScaleTransform ScaleX="0.995" ScaleY="0.995"/>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Bd" Property="Opacity" Value="0.5"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- ================= BUTTONS ================= -->
    <Style x:Key="PrimaryButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="{DynamicResource AppAccent}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppBackground}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppAccentDark}"/>
        <Setter Property="BorderThickness" Value="{StaticResource ControlBorderThickness}"/>
        <Setter Property="Padding" Value="{StaticResource ControlPadding}"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Template" Value="{StaticResource BaseButtonTemplate}"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>

    <Style x:Key="OutlineButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="{StaticResource ControlBorderThickness}"/>
        <Setter Property="Padding" Value="{StaticResource ControlPadding}"/>
        <Setter Property="Template" Value="{StaticResource BaseButtonTemplate}"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>

    <Style x:Key="GhostButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{DynamicResource AppAccent}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppAccent}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="{StaticResource ControlPadding}"/>
        <Setter Property="Template" Value="{StaticResource BaseButtonTemplate}"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>

    <Style x:Key="SmallAccentButton" TargetType="{x:Type Button}" BasedOn="{StaticResource PrimaryButton}">
        <Setter Property="Padding" Value="{StaticResource DensePadding}"/>
        <Setter Property="FontSize" Value="12"/>
        <Setter Property="MinWidth" Value="60"/>
    </Style>

    <!-- Верхняя кнопка Назад -->
    <Style x:Key="TopBarBackButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}"
                            CornerRadius="{StaticResource ControlCornerRadius}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                          Margin="{TemplateBinding Padding}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppSurface}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppBorder}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ================= TOGGLE ================= -->
    <Style x:Key="ToggleAccent" TargetType="{x:Type ToggleButton}">
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="8,4"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="16">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                          Margin="{TemplateBinding Padding}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppAccent}"/>
                            <Setter Property="Foreground" Value="{DynamicResource AppBackground}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.95"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ================= TEXT INPUTS ================= -->
    <Style x:Key="RoundedTextBox" TargetType="{x:Type TextBox}">
        <Setter Property="Padding" Value="8,6"/>
        <Setter Property="BorderThickness" Value="{StaticResource ControlBorderThickness}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{StaticResource ControlCornerRadius}">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="0"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource AppAccentDark}"/>
                        </Trigger>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource AppAccent}"/>
                            <Setter TargetName="Bd" Property="BorderThickness" Value="2"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.56"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="RoundedPasswordBox" TargetType="{x:Type PasswordBox}">
        <Setter Property="Padding" Value="8,6"/>
        <Setter Property="BorderThickness" Value="{StaticResource ControlBorderThickness}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type PasswordBox}">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{StaticResource ControlCornerRadius}">
                        <ScrollViewer x:Name="PART_ContentHost"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource AppAccentDark}"/>
                        </Trigger>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource AppAccent}"/>
                            <Setter TargetName="Bd" Property="BorderThickness" Value="2"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.56"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ComboBox -->
    <Style x:Key="CleanComboBox" TargetType="ComboBox">
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Padding" Value="8,4"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
    </Style>

    <!-- ================= LIST / GRID ================= -->
    <Style x:Key="SimpleListView" TargetType="{x:Type ListView}">
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="6"/>
    </Style>

    <Style TargetType="ListViewItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="Padding" Value="8,6"/>
        <Setter Property="Margin" Value="0,1,0,1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="6">
                        <ContentPresenter Margin="{TemplateBinding Padding}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppAccent}"/>
                            <Setter Property="Foreground" Value="{DynamicResource AppBackground}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppSurface}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- DataGrid -->
    <Style TargetType="{x:Type DataGrid}">
        <Setter Property="Background" Value="{DynamicResource AppBackground}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="RowBackground" Value="{DynamicResource AppSurface}"/>
        <Setter Property="AlternatingRowBackground" Value="{DynamicResource AppBackground}"/>
        <Setter Property="GridLinesVisibility" Value="None"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="RowHeight" Value="32"/>
        <Setter Property="HeadersVisibility" Value="All"/>
        <Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="VerticalGridLinesBrush" Value="{DynamicResource AppBorder}"/>
    </Style>

    <Style TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Padding" Value="8,6"/>
    </Style>

    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="Foreground" Value="{DynamicResource AppForeground}"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridRow}">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="6" Margin="2,1">
                        <SelectiveScrollingGrid>
                            <SelectiveScrollingGrid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </SelectiveScrollingGrid.ColumnDefinitions>
                            <SelectiveScrollingGrid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </SelectiveScrollingGrid.RowDefinitions>
                            <DataGridCellsPresenter Grid.Column="1"/>
                            <DataGridDetailsPresenter Grid.Column="1" Grid.Row="1"
                                                      Visibility="{TemplateBinding DetailsVisibility}"/>
                        </SelectiveScrollingGrid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppAccent}"/>
                            <Setter Property="Foreground" Value="{DynamicResource AppBackground}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource AppSurface}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Прочее (меню/контекст/tooltip/статус/карточки) оставлено без изменений кроме новых цветов -->
    <Style x:Key="Card" TargetType="{x:Type Border}">
        <Setter Property="Background" Value="{DynamicResource AppSurface}"/>
        <Setter Property="CornerRadius" Value="10"/>
        <Setter Property="Padding" Value="12"/>
        <Setter Property="BorderBrush" Value="{DynamicResource AppBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
    </Style>

    <!-- Хелперы -->
    <DataTemplate x:Key="LightThemeResources">
        <TextBlock Text="Light"/>
    </DataTemplate>
    <DataTemplate x:Key="DarkThemeResources">
        <TextBlock Text="Dark"/>
    </DataTemplate>

</ResourceDictionary>
